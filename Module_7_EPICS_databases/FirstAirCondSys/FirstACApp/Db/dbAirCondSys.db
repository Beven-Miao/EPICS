record(calc, "$(user):calcTime")
{
	field(DESC, "Time counter")
	field(SCAN,"1 second")
	field(FLNK, "$(user):calcInDoorTmp")
	field(CALC, "(A<B)?(A+C):D")
	field(INPA, "$(user):calcTime.VAL NPP NMS")
	field(INPB, "120")
	field(INPC, "1")
	field(INPD, "0")
	field(EGU, "Counts")
	field(HOPR, "120")
	field(LOPR, "0")
}
record(calc, "$(user):calcOutDoorTmp")
{
	alias("$(user):odt")
	field(DESC, "Out Door Temperature")
	field(FLNK, "$(user):calcAirCondCore")
	field(CALC, "(B-C)*SIN(PI*A/120)+C")
	field(INPA, "$(user):calcTime.VAL NPP NMS")
	field(INPB, "$(HighTmp)")
	field(INPC, "$(LowTmp)")
	field(EGU, "Counts")
	field(HOPR, "50")
	field(HIHI, "40")
	field(HIGH, "30")
	field(LOW, "10")
	field(LOLO, "0")
	field(HHSV, "MAJOR")
	field(HSV, "MINOR")
	field(LSV, "MINOR")
	field(LLSV, "MAJOR")
}
record(calc, "$(user):calcInDoorTmp")
{
        alias("$(user):idt")
        field(DESC, "Indoor Temperature")
        field(FLNK, "$(user):calcOutDoorTmp")
        field(CALC, "C+(A-C)*B+D")
        field(INPA, "$(user):calcOutDoorTmp.VAL NPP NMS")
        field(INPB, "$(InsulCoeff)")
        field(INPC, "$(user):calcInDoorTmp.VAL NPP NMS")
        field(INPD, "$(user):calcAirCondCore.VAL NPP NMS")
        field(EGU, "Counts")
        field(HOPR, "50")
        field(HIHI, "40")
        field(HIGH, "30")
        field(LOW, "10")
        field(LOLO, "0")
        field(HHSV, "MAJOR")
        field(HSV, "MINOR")
        field(LSV, "MINOR")
        field(LLSV, "MAJOR")
	field(VAL, "$(PreSetTmp)")
}
record(ai, "$(user):aiPreSetTmp")
{
	field(DESC, "Pre set temperature")
	field(INP, "$(PreSetTmp)")
}
record(ai, "$(user):aiDeadBand")
{
	field(DESC, "deadband around PreSetTmp")
	field(INP, "$(DeadBand)")
}
record(calc, "$(user):calcAutoSwitch")
{
	field(DESC, "Auto AC switcher")
	field(CALC, "(A-B)>C?-1:0")
	field(INPA, "$(user):calcInDoorTmp.VAL NPP NMS")
	field(INPB, "$(user):aiPreSetTmp.VAL PP NMS")
	field(INPC, "$(user):aiDeadBand.VAL PP NMS")
}
record(calc, "$(user):calcAirCondCore")
{
	field(DESC, "Air condition core")
	field(CALC, "C<0?A*B:(-A*C)")
	field(INPA, "$(Power)")
	field(INPB, "$(user):calcAutoSwitch.VAL PP NMS")
	field(INPC, "$(user):aiMode.VAL PP NMS")
}
## aiMood: -1 -> manul mode off; 0 -> manul off; 1 -> manul on.
record(ai, "$(user):aiMode")
{
	field(VAL, "-1")
}
